<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>How to deploy LionkApp on Raspberry Pi | Lionk </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="How to deploy LionkApp on Raspberry Pi | Lionk ">
      
      
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="">
      <meta name="docfx:tocrel" content="">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/Lionk-Framework/Lionk/blob/api-documentation/docs/RaspberryDeploy.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="Lionk">
            Lionk
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">

      <div class="content">
        <div class="actionbar">

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="how-to-deploy-lionkapp-on-raspberry-pi">How to deploy LionkApp on Raspberry Pi</h1>

<p>This part explains how to deploy LionkApp on a Raspberry Pi using docker and docker-compose.</p>
<h2 id="1-install-docker">1. Install docker</h2>
<p>If Docker is not installed on your Raspberry Pi, you can install it by following the instructions below.</p>
<pre><code class="lang-bash">sudo apt-get update
sudo apt-get install docker
sudo apt-get install docker-compose
</code></pre>
<h2 id="2-install-ufw">2. Install ufw</h2>
<p>It is recommended to install ufw (Uncomplicated Firewall) to define the firewall rules for your Raspberry Pi and set the rules for the ports that you want to use on LionkApp.</p>
<pre><code class="lang-bash">sudo apt-get install ufw
</code></pre>
<h2 id="3-configure-ufw">3. Configure ufw</h2>
<p>Now you need to configure the ufw to allow the ports that you want to use on LionkApp. You can use the following commands to allow the ports.
Please keep in mind that you need to allow the port that you will use for LionkApp and SSH.</p>
<pre><code class="lang-bash">sudo ufw allow 22
sudo ufw allow &lt;LionkAppPort&gt;
sudo ufw enable
</code></pre>
<h2 id="4-create-a-docker-composeyml-file">4. Create a docker-compose.yml file</h2>
<p>Create a docker-compose.yml file in the directory that you want to deploy LionkApp. You can use the following template for the docker-compose.yml file.</p>
<pre><code class="lang-yaml">version: '3.8'

services:
  lionkapp:
    image: ghcr.io/lionk-framework/lionkapp:latest
    privileged: true
    devices:
      - &quot;/dev/gpiomem:/dev/gpiomem&quot;
      - &quot;/dev/mem:/dev/mem&quot;
      - &quot;/dev/ttyAMA0:/dev/ttyAMA0&quot;
      - &quot;/dev/ttyS0:/dev/ttyS0&quot;
    volumes:
      - ./sys/class/gpio:/sys/class/gpio
      - ./config:/app/config
      - ./plugins:/app/plugins
      - ./data:/app/data
      - ./logs:/app/logs
      - ./temp:/app/temp
      - ./keys:/root/.aspnet/DataProtection-Keys
    ports:
      - &quot;5001:5001&quot;
</code></pre>
<h3 id="41-explanation-of-the-docker-composeyml-file">4.1. Explanation of the docker-compose.yml file</h3>
<ul>
<li><code>image</code>: The image that will be used to deploy LionkApp. You can use the latest version of the image by using <code>ghcr.io/lionk-framework/lionkapp:latest</code>.</li>
<li><code>privileged</code>: This is required to access the GPIO pins on the Raspberry Pi.</li>
<li><code>devices</code>: The devices that will be used by the LionkApp to access the GPIO pins.</li>
<li><code>volumes</code>: The volumes that will be used by the LionkApp to store the configuration, plugins, data, logs, temp files, and keys. Keys are used for the authentication protection, if you don't store the keys, you will need to re-authenticate every time you restart the LionkApp by clearing the cookies. <code>Sys</code> folder is used to access the GPIO pins. The <code>settings</code> folder is used to store the configuration file.</li>
<li><code>ports</code>: The port that will be used by the LionkApp. You can change the port by changing the first port number in the port mapping.</li>
</ul>
<h3 id="42-changing-the-ports-settings">4.2. Changing the ports settings</h3>
<h4 id="421-changing-the-container-port">4.2.1. Changing the container port</h4>
<p>You can change the port that will be used by docker to expose LionkApp by changing the first port number in the port mapping. For example, if you want to use port <code>8080</code> instead of <code>5001</code>, you can change the port mapping as below.</p>
<pre><code class="lang-yaml">ports:
  - &quot;8080:5001&quot;
</code></pre>
<h2 id="5-deploy-lionkapp">5. Deploy LionkApp</h2>
<p>Now you can deploy LionkApp by using the following command inside the directory that contains the <code>docker-compose.yml</code> file.</p>
<pre><code class="lang-bash">docker-compose up
</code></pre>
<p>if you want to run the container in the background, you can use the following command.</p>
<pre><code class="lang-bash">docker-compose up -d
</code></pre>
<h2 id="6-access-lionkapp">6. Access LionkApp</h2>
<p>If you have configured the ports and the firewall correctly, you can access LionkApp by using the following URL in your browser.</p>
<pre><code class="lang-bash">http://&lt;RaspberryPiIP&gt;:&lt;LionkAppPort&gt;
</code></pre>
<h2 id="7-stop-or-restart-lionkapp">7. Stop or restart LionkApp</h2>
<p>You can stop or restart LionkApp by using the following commands.</p>
<pre><code class="lang-bash">docker-compose stop
docker-compose up
</code></pre>
<h2 id="8-update-lionkapp">8. Update LionkApp</h2>
<p>To update LionkApp, you can use the following commands.</p>
<pre><code class="lang-bash">docker-compose down # if the container is running
docker-compose pull # to pull the latest image
docker-compose up
</code></pre>
<h2 id="9-attaching-a-terminal-to-the-container">9. Attaching a terminal to the container</h2>
<p>If you want to attach a terminal to the container, you can use the following command.</p>
<p>first list the running containers.</p>
<pre><code class="lang-bash">docker container ps
</code></pre>
<p>the output will be like below.</p>
<pre><code class="lang-bash">CONTAINER ID   IMAGE                                     COMMAND        CREATED          STATUS          PORTS                                       NAMES
f72fef8584b0   ghcr.io/lionk-framework/lionkapp:latest   &quot;./LionkApp&quot;   29 minutes ago   Up 21 seconds   0.0.0.0:5001-&gt;5001/tcp, :::5001-&gt;5001/tcp   pi_lionkapp_1
</code></pre>
<p>then you can use the the <code>CONTEINER ID</code> to attach a terminal to the container with the following command.</p>
<pre><code class="lang-bash">docker attach &lt;CONTAINER ID&gt;
</code></pre>
<h2 id="10-attach-an-interactive-terminal-to-the-container">10. Attach an interactive terminal to the container</h2>
<p>If you want to attach an interactive terminal to the container, you can use the following command.</p>
<pre><code class="lang-bash">docker exec -it &lt;CONTAINER ID&gt; /bin/bash
</code></pre>
<h2 id="11-access-the-docker-logs">11. Access the docker logs</h2>
<p>You can access the docker logs of the container by using the following command. These logs represent the logs if docker and the application (Like <code>Console.WriteLine()</code> etc.).</p>
<pre><code class="lang-bash">docker logs &lt;CONTAINER ID&gt;
</code></pre>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/Lionk-Framework/Lionk/blob/api-documentation/docs/RaspberryDeploy.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
